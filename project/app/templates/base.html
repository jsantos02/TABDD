<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Porto Urban Transportation System{% endblock %}</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 0; padding: 0; }
    header { background: #00428C; color: #fff; padding: 12px 24px; }
    header a { color: #fff; margin-right: 16px; text-decoration: none; }
    main { padding: 16px 24px; }
    table { border-collapse: collapse; width: 100%; margin-top: 12px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #f3f4f6; text-align: left; }
    .error { color: #b91c1c; }
    input, button { padding: 6px 10px; margin: 4px 0; }
  </style>
</head>
<body>
<header>
  <a href="/">Home</a>
  <a href="/lines">Lines</a>
  <a href="/history">History</a>
  <a href="/profile">Profile</a>
  <a href="/plan">Plan a trip</a>
  <a href="/live">Live</a>
  <a href="/feedback">Feedback</a>
  {% if user and user.role == 'admin' %}
    <a href="/admin" style="color: #ffcc00; font-weight: bold;">Admin Dashboard</a>
  {% endif %}
  <a href="/logout" style="float:right;">Logout</a></header>
<main>
  {% block content %}{% endblock %}
</main>
</body>
</html>
<script>
  // 1 hour in milliseconds
  const INACTIVITY_LIMIT = 3600 * 1000; 
  let timeout;

  function resetTimer() {
    clearTimeout(timeout);
    timeout = setTimeout(() => {
      alert("Session expired due to inactivity.");
      window.location.href = "/logout";
    }, INACTIVITY_LIMIT);
  }

  // Listen for activity
  window.onload = resetTimer;
  document.onmousemove = resetTimer;
  document.onkeypress = resetTimer;
  document.onclick = resetTimer;
</script>
