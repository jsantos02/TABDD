{% extends "base.html" %}
{% block title %}Lines{% endblock %}
{% block content %}
<h1>Lines</h1>
<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Name</th>
      <th>Mode</th>
      <th>Details (Stops / schedules)</th>
    </tr>
  </thead>
  <tbody>
  {% for line in lines %}
    <tr>
      <td>{{ line.code }}</td>
      <td>{{ line.name }}</td>
      <td>{{ line.line_mode }}</td>
      <td>
        <a href="#" onclick="loadLine('{{ line.line_id }}'); return false;">View</a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<pre id="line-detail" style="margin-top:16px; white-space: pre-wrap;"></pre>

<script>
async function loadLine(lineId) {
  const r = await fetch(`/api/lines/${lineId}`);
  const data = await r.json();
  document.getElementById('line-detail').textContent = JSON.stringify(data, null, 2);
}
</script>
{% endblock %}
